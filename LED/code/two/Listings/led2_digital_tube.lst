C51 COMPILER V9.59.0.0   LED2_DIGITAL_TUBE                                                 02/20/2023 18:06:56 PAGE 1   


C51 COMPILER V9.59.0.0, COMPILATION OF MODULE LED2_DIGITAL_TUBE
OBJECT MODULE PLACED IN .\Objects\led2_digital_tube.obj
COMPILER INVOKED BY: C:\Keil_C51\C51\BIN\C51.EXE src\led2_digital_tube.c OPTIMIZE(8,SPEED) BROWSE INCDIR(.\src;.\Driver\
                    -inc;.\Driver\src) DEBUG OBJECTEXTEND PRINT(.\Listings\led2_digital_tube.lst) TABS(2) OBJECT(.\Objects\led2_digital_tube.
                    -obj)

line level    source

   1          #include  "led2_digital_tube.h"
   2          #include  "global.h"
   3          #include  "STC8G_H_GPIO.h"
   4          #include  "uart.h"
   5          u8  preDisplayV[2];
   6          u8  digital_value[2];
   7          u8  led_display_enable;
   8          /*************    功能说明        *************
   9          
  10          驱动8个共阴数码管自动扫描显示.
  11          
  12          ******************************************/
  13          static void led_display_unit(uint8 displayV,uint8 page);
  14          
  15          /**************** 外部函数声明*****************/
  16          
  17          
  18          void  led_display(void)
  19          {
  20   1          static u8 page=1;
  21   1          
  22   1          if(led_display_enable)
  23   1          {
  24   2            if(page == 1)
  25   2            {
  26   3                led_display_unit(digital_value[0],page);
  27   3                page = 2;   
  28   3            }
  29   2            else if(page == 2)
  30   2            {
  31   3                led_display_unit(digital_value[1],page);
  32   3                page = 1;   
  33   3            }
  34   2          }
  35   1          else
  36   1          {
  37   2             DIG1_OFF;
  38   2             DIG2_OFF;
  39   2          }
  40   1      } 
  41          
  42          static void led_display_unit(u8 displayV,u8 page)
  43          {
  44   1      
  45   1           DIG1_OFF;
  46   1           DIG2_OFF;
  47   1          
  48   1           switch(displayV)
  49   1           {
  50   2             case 0:
  51   2             A_OOUT(1); B_OOUT(1); C_OOUT(1); D_OOUT(1); //0x3F
  52   2             E_OOUT(1); F_OOUT(1); G_OOUT(0);  
  53   2             break;
C51 COMPILER V9.59.0.0   LED2_DIGITAL_TUBE                                                 02/20/2023 18:06:56 PAGE 2   

  54   2             case 1:
  55   2             A_OOUT(0); B_OOUT(1); C_OOUT(1); D_OOUT(0);  //0x06
  56   2             E_OOUT(0); F_OOUT(0); G_OOUT(0);  
  57   2             break;
  58   2             case 2:
  59   2             A_OOUT(1); B_OOUT(1); C_OOUT(0); D_OOUT(1);  //0x5B
  60   2             E_OOUT(1); F_OOUT(0); G_OOUT(1);  
  61   2             break;
  62   2             case 3:
  63   2             A_OOUT(1); B_OOUT(1); C_OOUT(1); D_OOUT(1); //0x4F
  64   2             E_OOUT(0); F_OOUT(0); G_OOUT(1);    
  65   2             break;
  66   2             case 4:
  67   2             A_OOUT(0); B_OOUT(1); C_OOUT(1); D_OOUT(0); //0x66
  68   2             E_OOUT(0); F_OOUT(1); G_OOUT(1);    
  69   2             break;
  70   2             case 5:
  71   2             A_OOUT(1); B_OOUT(0); C_OOUT(1); D_OOUT(1); //0x6D
  72   2             E_OOUT(0); F_OOUT(1); G_OOUT(1);  
  73   2             break;
  74   2             case 6:
  75   2             A_OOUT(1); B_OOUT(1); C_OOUT(1); D_OOUT(1); //0x7D
  76   2             E_OOUT(1); F_OOUT(1); G_OOUT(1);    
  77   2             break;
  78   2             case 7:
  79   2             A_OOUT(1); B_OOUT(1); C_OOUT(1); D_OOUT(0); //0x07
  80   2             E_OOUT(0); F_OOUT(0); G_OOUT(0);    
  81   2             break;
  82   2             case 8:
  83   2             A_OOUT(1); B_OOUT(1); C_OOUT(1); D_OOUT(1); //0x7F
  84   2             E_OOUT(1); F_OOUT(1); G_OOUT(1);   
  85   2             break;
  86   2             case 9:
  87   2             A_OOUT(1); B_OOUT(1); C_OOUT(1); D_OOUT(1); //0x6F
  88   2             E_OOUT(0); F_OOUT(1); G_OOUT(1);    
  89   2             break;
  90   2             case 0x0A:
  91   2             A_OOUT(1); B_OOUT(1); C_OOUT(1); D_OOUT(0); //0x77
  92   2             E_OOUT(1); F_OOUT(1); G_OOUT(1);  
  93   2             break;
  94   2             case 0x0B:
  95   2             A_OOUT(0); B_OOUT(0); C_OOUT(1); D_OOUT(1); //0x7C
  96   2             E_OOUT(1); F_OOUT(1); G_OOUT(1);   
  97   2             break;
  98   2             case 0x0C:
  99   2             A_OOUT(1); B_OOUT(0); C_OOUT(1); D_OOUT(1); //0x39
 100   2             E_OOUT(1); F_OOUT(1); G_OOUT(1);   
 101   2             break;
 102   2             case 0x0D:
 103   2             A_OOUT(0); B_OOUT(1); C_OOUT(1); D_OOUT(1); //0x5E
 104   2             E_OOUT(1); F_OOUT(0); G_OOUT(1);  
 105   2             break;
 106   2             case 0x0E:
 107   2             A_OOUT(1); B_OOUT(0); C_OOUT(0); D_OOUT(1); //0x79
 108   2             E_OOUT(1); F_OOUT(1); G_OOUT(1);  
 109   2             break;
 110   2             case 0x0F:
 111   2             A_OOUT(1); B_OOUT(1); C_OOUT(0); D_OOUT(1); //0x71
 112   2             E_OOUT(1); F_OOUT(0); G_OOUT(0);  
 113   2             break;
 114   2             case 0x10: //'L'
 115   2             A_OOUT(0); B_OOUT(0); C_OOUT(0); D_OOUT(1); //0x38
C51 COMPILER V9.59.0.0   LED2_DIGITAL_TUBE                                                 02/20/2023 18:06:56 PAGE 3   

 116   2             E_OOUT(1); F_OOUT(1); G_OOUT(0);  
 117   2             break; 
 118   2             default:  //'-'
 119   2             A_OOUT(0); B_OOUT(0); C_OOUT(0); D_OOUT(0); //0x40
 120   2             E_OOUT(0); F_OOUT(0); G_OOUT(1);  
 121   2             break;
 122   2           }
 123   1         
 124   1           if(page==1){DIG1_ON;}
 125   1           else       {DIG2_ON;}
 126   1      }
 127          
 128          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    319    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      6    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
